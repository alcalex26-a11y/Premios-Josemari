<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PREMIOS J&P 2025</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- LOGIN -->
<section id="login" class="seccion" style="display:none;">
  <h2>Iniciar sesión</h2>
  <div style="max-width:300px; margin:0 auto; text-align:center;">
    <input id="loginUser" type="text" placeholder="Usuario"
           style="width:100%; padding:8px; margin:8px 0;">
    <input id="loginPass" type="password" placeholder="Contraseña"
           style="width:100%; padding:8px; margin:8px 0;">
    <button id="btnLogin" class="btn gold" style="width:100%; padding:10px;">
      Entrar
    </button>
    <p id="loginError" style="color:red; display:none; margin-top:10px;">
      Usuario o contraseña incorrectos
    </p>
  </div>
</section>

<!-- CONTENIDO DE LA APP (oculto hasta login) -->
<div id="appContent" style="display:none;">

  <!-- NAV -->
  <nav class="top">
    <div class="nav-inner">
      <div class="logo">Josemari Awards 2025</div>
      <div class="nav-actions">
        <button class="btn" onclick="mostrarSeccion('inicio')">Inicio</button>
        <button class="btn" onclick="mostrarSeccion('participantes')">Participantes</button>
        <button class="btn" onclick="mostrarSeccion('categorias')">Categorías</button>
        <button class="btn" onclick="mostrarSeccion('votacion')">Votar</button>
        <button class="btn" onclick="mostrarSeccion('votacion-nominados')">Votación nominados</button>
        <button id="btnResultados" class="btn" onclick="mostrarSeccion('resultados')">Resultados</button>
      </div>

      <!-- PERFIL USUARIO -->
      <div id="perfilUsuario" class="perfil-usuario" style="display:none;">
        <span id="nombreUsuario"></span>
        <img id="avatarUsuario" src="" alt="Avatar"
             style="width:40px; height:40px; border-radius:50%; margin-left:8px; border:2px solid gold;">
      </div>
    </div>
  </nav>

  <!-- INICIO -->
  <header class="hero seccion" id="inicio">
    <div class="shine"></div>

    <!-- Columna izquierda -->
    <div class="fotos-lateral izquierda">
      <img src="fotos/Lagunas.png" alt="">
      <img src="fotos/Lodres.jpeg" alt="">
      <img src="fotos/Zurra.jpeg" alt="">
    </div>

    <div class="hero-inner">
      <div class="hero-texto">
        <span class="badge">JOSEMARI 2025</span>
        <h1>Bienvenido a los Premios Josemari 2025</h1>
        <p class="subtitle">Esta es la web oficial de los Premios de este año ¡Haz que tu voto cuente!</p>
        <div class="cta">
          <button class="btn gold" onclick="mostrarSeccion('votacion')">Votar ahora</button>
          <button class="btn" onclick="mostrarSeccion('participantes')">Ver participantes</button>
        </div>
      </div>

      <div class="hero-imagen">
        <img src="fotos/ImagenJosemari.png" alt="Imagen de inicio">
      </div>
    </div>

    <!-- Columna derecha -->
    <div class="fotos-lateral derecha">
      <img src="fotos/fin_año.jpeg" alt="">
      <img src="fotos/Playa.jpeg" alt="">
      <img src="fotos/Carnaval.jpeg" alt="">
    </div>
  </header>
</div>
  <script>
  // Usuarios válidos
const usuariosPermitidos = {
  Asier: { pass: "claveAsier123", avatar: "fotos/asieras.jpeg" },
  Rulas: { pass: "claveRulas456", avatar: "fotos/rulas-avatar.png" },
  Raul:  { pass: "claveRaul789",  avatar: "fotos/raul-avatar.png" }
};
function mostrarPerfil(nombre) {
  document.getElementById("nombreUsuario").textContent = nombre;
  document.getElementById("avatarUsuario").src = usuariosPermitidos[nombre].avatar;
  document.getElementById("perfilUsuario").style.display = "flex";
}

document.getElementById("perfilUsuario").addEventListener("click", () => {
  if (confirm("¿Cerrar sesión?")) {
    localStorage.removeItem("usuarioLogueado");
    document.getElementById("perfilUsuario").style.display = "none";

    // 👇 oculta todo el contenido y vuelve a mostrar el login
    document.getElementById("appContent").style.display = "none";
    document.getElementById("login").style.display = "block";
  }
});


  // Mostrar u ocultar botón Resultados según usuario
  function controlarAccesoResultados() {
    const user = localStorage.getItem("usuarioLogueado");
    const btn = document.getElementById("btnResultados");
    if (btn) btn.style.display = ["Asier","Rulas"].includes(user) ? "" : "none";
  }

  // Navegación entre secciones
  function mostrarSeccion(seccion) {
    const necesitaLogin = !["login","inicio","participantes","categorias"].includes(seccion);
    const user = localStorage.getItem("usuarioLogueado");
    if (necesitaLogin && !user) seccion = "login";

    document.querySelectorAll(".seccion").forEach(s => s.style.display = "none");
    document.getElementById(seccion).style.display = "block";
    window.scrollTo({ top: 0, behavior: "smooth" });

    if (seccion === "login") {
      document.getElementById("loginError").style.display = "none";
      document.getElementById("loginUser").value = "";
      document.getElementById("loginPass").value = "";
    }
    if (seccion === "resultados") cargarResultados();
  }

  // Login
  document.getElementById("btnLogin").addEventListener("click", () => {
    const user = document.getElementById("loginUser").value.trim();
    const pass = document.getElementById("loginPass").value.trim();
if (usuariosPermitidos[user] && usuariosPermitidos[user].pass === pass) {
  localStorage.setItem("usuarioLogueado", user);
  mostrarPerfil(user);
  controlarAccesoResultados();

  // 👇 aquí ocultamos login y mostramos la app
  document.getElementById("login").style.display = "none";
  document.getElementById("appContent").style.display = "block";

  mostrarSeccion("inicio");
} else {
  document.getElementById("loginError").style.display = "block";
}



  });

window.addEventListener("DOMContentLoaded", () => {
  const user = localStorage.getItem("usuarioLogueado");
  if (user && usuariosPermitidos[user]) {
    mostrarPerfil(user);
    controlarAccesoResultados();

    document.getElementById("login").style.display = "none";
    document.getElementById("appContent").style.display = "block";

    mostrarSeccion("inicio");
  } else {
    document.getElementById("login").style.display = "block";
    document.getElementById("appContent").style.display = "none"; // 👈 oculta el menú y todo
  }
});


</script>


  <main>
    <!-- PARTICIPANTES -->
    <section id="participantes" class="seccion">
      <h2>Participantes</h2>
      <div class="grid-participantes">
        <div class="participante"><img src="fotos/asieras.jpeg" alt="Asieras"><h3>Asieras</h3></div>
        <div class="participante"><img src="fotos/rulillas.jpeg" alt="Rulillas"><h3>Rulillas</h3></div>
        <div class="participante"><img src="fotos/dario.jpeg" alt="Darawayas"><h3>Darawayas</h3></div>
        <div class="participante"><img src="fotos/ivanp.jpeg" alt="Ivanpechotes"><h3>Ivanpechotes</h3></div>
        <div class="participante"><img src="fotos/dani.jpeg" alt="Danigg"><h3>DaniGG</h3></div>
        <div class="participante"><img src="fotos/Lucia.jpeg" alt="Lusilu"><h3>Lusilu</h3></div>
        <div class="participante"><img src="fotos/ines.jpeg" alt="Almansa"><h3>Almansa</h3></div>
        <div class="participante"><img src="fotos/rober.jpeg" alt="Robertuki"><h3>Robertuki</h3></div>
        <div class="participante"><img src="fotos/marco.jpeg" alt="Toñaco"><h3>Toñaco</h3></div>
        <div class="participante"><img src="fotos/manu.jpeg" alt="Manolo"><h3>Manolo</h3></div>
        <div class="participante"><img src="fotos/mario.jpeg" alt="Kastor"><h3>Kastor</h3></div>
        <div class="participante"><img src="fotos/maria.jpeg" alt="Maria"><h3>Maria</h3></div>
        <div class="participante"><img src="fotos/gamepro.jpeg" alt="Gamepro"><h3>Gamepro</h3></div>
        <div class="participante"><img src="fotos/fervico.jpeg" alt="El Enano"><h3>El Enano</h3></div>
        <div class="participante"><img src="fotos/Poru.jpeg" alt="Poru"><h3>Poru</h3></div>
        <div class="participante"><img src="fotos/iker.jpeg" alt="Ikardo"><h3>Ikardo</h3></div>
        <div class="participante"><img src="fotos/Fermoriv.jpeg" alt="Fermoriv"><h3>Fermoriv</h3></div>
        <div class="participante"><img src="fotos/labrada.jpeg" alt="Lab el Viejo"><h3>Lab el Viejo</h3></div>
<!-- Modal para mostrar participante -->
</div>
</section>
<script>
  function mostrarSeccion(seccion) {
    document.querySelectorAll('.seccion').forEach(sec => sec.style.display = 'none');
    document.getElementById(seccion).style.display = 'block';
    window.scrollTo({ top: 0, behavior: 'smooth' });
  
    if (seccion === 'votacion-nominados') {
      // Limpiar antes de rellenar para evitar duplicados
      document.getElementById('lista-nominados-1').innerHTML = '';
      document.getElementById('lista-nominados-2').innerHTML = '';
  
      crearApartadoNominaciones('lista-nominados-1', 'enviarNominados1', 'nominaciones_soltero');
      crearApartadoNominaciones('lista-nominados-2', 'enviarNominados2', 'nominaciones_otro');
    }
  }
    </script>
  
  

<!-- Modal fuera de la sección -->
<!-- Modal fuera de la sección -->
<div id="modalParticipante" class="modal">
    <div class="modal-contenido">
      <span class="cerrar">&times;</span>
      <div class="modal-body">
        <img id="modalImagen" src="" alt="">
        <div class="modal-texto">
          <p id="modalDescripcion"></p>
        </div>
      </div>
    </div>
  </div>
  


<!-- CATEGORÍAS -->
<section id="categorias" class="seccion">
  <h2>Categorías</h2>
  <div class="grid-participantes">
    <div class="categoria" data-descripcion="Boracho del Año: La persona que mas se ha puesto hasta el culo en todo el año, nose si tanto como en la foto porque vaya cogorza lleva mi colegon el reparte melones, asi da gusto, esta categoria es para los valientes y para los que le echan cojones ostia">
      <img src="fotos/borracho.png" alt="Borracho del año">
      <h3> Borracho del año</h3>
    </div>
    <div class="categoria" data-descripcion="Fiestero del Año: ¡Siempre listo para la fiesta! Donde hay música y diversión, ahí está él/ella, contagiando alegría y buena vibra a todos">
      <img src="fotos/fiestero.png" alt="Fiestero del año">
      <h3> Fiestero del año</h3>
    </div>
    <div class="categoria" data-descripcion="Video del Año: Ese clip que todos vimos mil veces, que nos hizo reír, sorprendernos o simplemente recordar un momento épico. ¡Imposible olvidarlo!">
      <img src="fotos/viajero.jpg" alt="Viejero del año">
      <h3> Viejero del año</h3>
    </div>
    <div class="categoria" data-descripcion="Palabras del Año: La palabra perfecta, el comentario más épico o el dicho que todos recuerdan. ¡Lo que hace historia!">
      <img src="fotos/" alt="Palabra del año">
      <h3> Palabra/Frase del año</h3>
    </div>
    <div class="categoria" data-descripcion="Trío del Año: Ese grupo inseparable que siempre está junto, causando risas, travesuras y momentos inolvidables. ¡Tres veces más diversión!">
      <img src="fotos/trio.jpg" alt="trio del año">
      <h3> Trio del año</h3>
    </div>
    <div class="categoria" data-descripcion="Mejor Personaje fuera de JYP: Esa persona fuera del grupo que brilla por su estilo único y carisma, dejando huella allá donde va. ¡Imposible no recordarla">
      <img src="fotos/mpersonaje.jpg" alt="Mejor Personaje fuera de JyP">
      <h3> Mejor Personaje fuera de JyP</h3>
    </div>
    <div class="categoria" data-descripcion="Fiesta del Año: La celebración que nadie quiere perderse: música, risas y momentos épicos garantizados. ¡Memorable de principio a fin!">
      <img src="fotos/fiesta.jpg" alt="Fiesta del año">
      <h3> Fiesta del año</h3>
    </div>
    <div class="categoria" data-descripcion="Autistada del Año: Esa persona que destaca por su intensidad, originalidad y pasión en hacer la mayor autistada del año. ¡Siempre dejando su marca única!">
      <img src="fotos/autistada.png" alt="Autistada del año">
      <h3> Autistada del año</h3>
    </div>
    <div class="categoria" data-descripcion="Broma del Año: Ese momento que nos hizo reír hasta doler la panza y que todos recordaremos por siempre. ¡Risas garantizadas!">
      <img src="fotos/broma.png" alt="Broma del año">
      <h3> Broma del año</h3>
    </div>
    <div class="categoria" data-descripcion="Foto del Año: La captura que lo dice todo: momentos épicos, caras inolvidables y pura vibra. ¡Inmortalizada para la historia!">
      <img src="fotos/foto.png" alt="Foto del año">
      <h3> Foto del año</h3>
    </div>
    <div class="categoria" data-descripcion="Video del Año: Ese clip que todos vimos mil veces, que nos hizo reír, sorprendernos o simplemente recordar un momento épico. ¡Imposible olvidarlo!">
      <img src="fotos/video.jpg" alt="Video del año">
      <h3> Video del año</h3>
    </div>
    <div class="categoria" data-descripcion="Mote del Año: Ese apodo que se quedó pegado, nos hizo reír y define a la perfección a su dueño. ¡Imposible no llamarlo así!">
      <img src="fotos/mote.png" alt="Mote del año">
      <h3> Mote del año</h3>
    </div>
    <div class="categoria" data-descripcion="Más Guarro: Esa persona que no tiene filtros, dice lo que piensa y vive la vida sin vergüenza. ¡Sin miedo y sin censura!">
      <img src="fotos/guarrete.png" alt="Guarrete del año">
      <h3> Guarrete del año</h3>
    </div>
    <div class="categoria" data-descripcion="Fail del Año: Ese momento épico que salió todo mal… pero nos hizo reír a carcajadas. ¡Un clásico que nunca olvidaremos!">
      <img src="fotos/fail.jpg" alt="Fail del año">
      <h3> Fail del año</h3>
    </div>
    <div class="categoria" data-descripcion="Mejor Momento del Año: Ese instante que nos hizo sonreír, celebrar o simplemente sentir que todo valió la pena. ¡Pura magia!">
      <img src="fotos/m.png" alt="Mejor Momento del año">
      <h3> Mejor momento del año</h3>
    </div>
    <div class="categoria" data-descripcion="Meme del Año: Ese momento convertido en imagen que nos hizo reír una y otra vez. ¡Imposible olvidarlo!">
      <img src="fotos/meme.jpg" alt="Meme del año">
      <h3> Meme del año</h3>
    </div>
    <div class="categoria" data-descripcion="Braihot del Año: Esa persona que siempre sorprende con ideas locas, ocurrencias épicas y creatividad sin límites. ¡Pura genialidad rebelde!">
      <img src="fotos/braihot.jpg" alt="Braihot del año">
      <h3> Braihot del año</h3>
    </div>
    <div class="categoria" data-descripcion="Correa del Año: La persona que siempre quiere hacer de todo… pero su pareja no la deja ni respirar">
      <img src="fotos/correon.png" alt="Correon del año">
      <h3> Correon del año</h3>
    </div>
    <div class="categoria" data-descripcion="Objeto del Año: Ese accesorio o cosa que se volvió protagonista, usado, recordado o mencionado por todos. ¡El verdadero ícono del grupo!">
      <img src="fotos/objeto.jpg" alt="Objeto del año">
      <h3> Objeto del año</h3>
    </div>
    <div class="categoria" data-descripcion="Loco del Año: Esa persona que siempre rompe esquemas con ocurrencias inesperadas, locuras épicas y energía sin fin. ¡Nunca sabes qué esperar!">
      <img src="fotos/loco.jpg" alt="Loco del año">
      <h3> Loco del año</h3>
    </div>
    <div class="categoria" data-descripcion="Mejor Vestido del Año: Siempre con estilo impecable, marcando tendencia y robándose miradas. ¡El icono fashion del grupo!">
      <img src="fotos/mejorviste.png" alt="El que mejor viste del año">
      <h3> El que mejor viste del año</h3>
    </div>
    <div class="categoria" data-descripcion="Peor Momento del Año: Ese instante que todos quisimos borrar, pero que terminó siendo parte de la historia.">
      <img src="fotos/peor_m.png" alt="Peor momento del año">
      <h3> Peor momento del año</h3>
    </div>
    <div class="categoria" data-descripcion="Papi/Mami del Año: La persona que se preocupa por todos, cuida, aconseja y siempre está al pendiente del grupo. ¡Nuestro ángel guardián">
      <img src="fotos/papi.jpg" alt="Papi/Mami del año">
      <h3> Papi/Mami del año</h3>
    </div>
    <div class="categoria" data-descripcion="Competitivo del Año: Siempre buscando ganar en todo, desde juegos hasta bromas. ¡No conoce la palabra rendirse!">
      <img src="fotos/competitivo.png" alt="Competitivo del año">
      <h3> Competitivo del año</h3>
    </div>
    <div class="categoria" data-descripcion="Mensaje del Año: Ese chat que se volvió legendario, ya sea por hacerlo reír, sorprender o quedar grabado en la memoria del grupo.">
      <img src="fotos/fiestero.png" alt="Mensaje del año">
      <h3> Mensaje del año</h3>
    </div>
    <div class="categoria" data-descripcion="Premio a la persona más divertida.">
      <img src="fotos/fiestero.png" alt="FIestero del año">
      <h3> FIestero del año</h3>
    </div>    <div class="categoria" data-descripcion="Premio a la persona más divertida.">
      <img src="fotos/fiestero.png" alt="FIestero del año">
      <h3> FIestero del año</h3>
    </div>    <div class="categoria" data-descripcion="Decepción del Año: Esa persona que nos falló o nos sorprendió para mal, dejándonos con cara de “no me lo esperaba”.">
      <img src="fotos/decepcion.jpg" alt="Decepción del año">
      <h3> Decepción del año</h3>
    </div>    <div class="categoria" data-descripcion="Revelación del Año: Esa persona que sorprendió a todos con su talento, carisma o estilo. ¡Nadie la vio venir y ahora todos hablan de ella!">
      <img src="fotos/revelacion.png" alt="Revelación del año">
      <h3> Revelación del año</h3>
    </div>    <div class="categoria" data-descripcion="MVP: La persona que se lleva todos los aplausos, siempre destacando y dejando huella. ¡Imparable y digno de ovación!">
      <img src="fotos/mvp.png" alt="MVP del año">
      <h3> MVP del año</h3>
    </div>
  </div>
</section>

<!-- Modal para mostrar categoría -->
<div id="modalCategoria" class="modal">
  <div class="modal-contenido">
    <span class="cerrar">&times;</span>
    <div class="modal-body">
      <img id="modalImagenCategoria" src="" alt="">
      <div class="modal-texto">
        <p id="modalDescripcionCategoria"></p>
      </div>
    </div>
  </div>
</div>


    <!-- VOTACIÓN -->
    <section id="votacion" class="seccion" style="display:none;">
      <div style="padding:50px; text-align:center; font-size:1.5em; font-weight:bold;">
        🚧 Esta parte aún no está disponible.  
        <br>¡Pronto podrás votar aquí!
      </div>
    </section>
    
    <section id="votacion" class="seccion">
      <h2>Votación</h2>
      <p>Selecciona tus nominados y pulsa “VOTAR”.</p>

      <div class="categoria">
        <h3>Mejor amigo</h3>
        <button class="voto" data-categoria="Mejor amigo" data-nominado="Asieras">Asieras</button>
        <button class="voto" data-categoria="Mejor amigo" data-nominado="Rulillas">Rulillas</button>
        <button class="voto" data-categoria="Mejor amigo" data-nominado="Darawayas">Darawayas</button>
      </div>

      <div class="categoria">
        <h3>Más divertido</h3>
        <button class="voto" data-categoria="Más divertido" data-nominado="Asieras">Asieras</button>
        <button class="voto" data-categoria="Más divertido" data-nominado="Rulillas">Rulillas</button>
        <button class="voto" data-categoria="Más divertido" data-nominado="Darawayas">Darawayas</button>
      </div>

      <div class="categoria">
        <h3>Más creativo</h3>
        <button class="voto" data-categoria="Más creativo" data-nominado="Asieras">Asieras</button>
        <button class="voto" data-categoria="Más creativo" data-nominado="Rulillas">Rulillas</button>
        <button class="voto" data-categoria="Más creativo" data-nominado="Darawayas">Darawayas</button>
      </div>

      <button id="enviarVoto" class="btn gold">VOTAR</button>
    </section>

    <section id="votacion-nominados" class="seccion" style="display:none;">
      <h2>Fiestero/a del año</h2>
      <p>Selecciona hasta <strong>3</strong> candidatos.</p>
      <div id="lista-nominados-1" class="grid-nominados"></div>
    
      <h2>Borrach@ del año</h2>
      <p>Selecciona hasta <strong>3</strong> candidatos.</p>
      <div id="lista-nominados-2" class="grid-nominados"></div>
    
      <h2>Más guarr@ del año</h2>
      <p>Selecciona hasta <strong>3</strong> candidatos.</p>
      <div id="lista-nominados-3" class="grid-nominados"></div>
    
      <h2>Viajero/a</h2>
      <p>Selecciona hasta <strong>3</strong> candidatos.</p>
      <div id="lista-nominados-4" class="grid-nominados"></div>
    
      <h2>Otra categoría</h2>
      <p>Selecciona hasta <strong>3</strong> candidatos.</p>
      <div id="lista-nominados-5" class="grid-nominados"></div>
    
      <!-- Botón único -->
      <button id="enviarTodasNominaciones" class="btn gold">Enviar todas las nominaciones</button>
    </section>
    
    <section id="resultados" class="seccion" style="display:none;">
      <h2>Resultados de las votaciones</h2>
    
      <div id="login-admin">
        <p>Introduce usuario y contraseña para ver los resultados:</p>
        <input type="text" id="adminUser" placeholder="Usuario">
        <input type="password" id="adminPass" placeholder="Contraseña">
        <button id="loginBtn" class="btn gold">Acceder</button>
        <p id="loginError" style="color:red; display:none;">Usuario o contraseña incorrectos</p>
      </div>
    
      <div id="resultados-contenido" style="display:none;">
        <h3>Resultados por categoría</h3>
        <div id="tabla-resultados"></div>
    
        <!-- Botones de borrado SOLO visibles aquí -->
        <button id="borrarVotos" class="btn red" style="margin-top:15px;">Borrar todos los votos</button>
        <button id="borrarNominaciones" class="btn red" style="margin-top:15px;">Borrar todas las nominaciones</button>
    
        <!-- Nuevo botón para restaurar votaciones -->
        <button id="restaurarVotaciones" class="btn gold" style="margin-top:15px;">Restaurar votaciones</button>
      </div>
    </section>
    
    

    
  </main>

  
  <footer>
    © Premios Josemari 2025 — Hecho por Iceman.
  </footer>

    
  

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp, getDocs, query } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyBNfmxGA8GNgWf-N1sstPhQlWitYMjnd6M",
      authDomain: "premiosjosemari-bc894.firebaseapp.com",
      projectId: "premiosjosemari-bc894",
      storageBucket: "premiosjosemari-bc894.appspot.com",
      messagingSenderId: "118315358578",
      appId: "1:118315358578:web:4c6c2248fdbdd4f61e65eb"
    };
    
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    


    
    // =========================
    // FUNCIÓN PARA CAMBIAR DE SECCIÓN
    // =========================
    window.mostrarSeccion = function (seccion) {
      document.querySelectorAll('.seccion').forEach(sec => sec.style.display = 'none');
      document.getElementById(seccion).style.display = 'block';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    
      if (seccion === 'votacion-nominados') {
        ['lista-nominados-1','lista-nominados-2','lista-nominados-3','lista-nominados-4','lista-nominados-5']
          .forEach(id => document.getElementById(id).innerHTML = '');
    
        crearApartadoNominaciones('lista-nominados-1', 'Fiester@ del año');
        crearApartadoNominaciones('lista-nominados-2', 'Borrach@ del año');
        crearApartadoNominaciones('lista-nominados-3', 'Más guarr@ del año');
        crearApartadoNominaciones('lista-nominados-4', 'Viajero/a');
        crearApartadoNominaciones('lista-nominados-5', 'Otra categoría');
      }
    };
    
    // =========================
    // VOTACIÓN NORMAL
    // =========================
    const votosSeleccionados = {};
    document.querySelectorAll('.voto').forEach(btn => {
      btn.addEventListener('click', () => {
        const categoria = btn.dataset.categoria;
        const nominado = btn.dataset.nominado;
        votosSeleccionados[categoria] = nominado;
    
        document.querySelectorAll(`.voto[data-categoria="${categoria}"]`)
          .forEach(b => b.classList.remove('selected'));
    
        btn.classList.add('selected');
      });
    });
    
    const enviarBtn = document.getElementById('enviarVoto');
    if (enviarBtn) {
      enviarBtn.addEventListener('click', async () => {
        const categorias = ["Mejor amigo", "Más divertido", "Más creativo"];
        for (let cat of categorias) {
          if (!votosSeleccionados[cat]) {
            alert(`Debes seleccionar un participante para "${cat}"`);
            return;
          }
        }
        try {
          enviarBtn.disabled = true;
          for (let cat of categorias) {
            await addDoc(collection(db, "votos"), {
              usuario: usuarioActual,
              categoria: cat,
              nominado: votosSeleccionados[cat],
              fecha: serverTimestamp()
            });
          }
          alert("¡Tus votos han sido registrados!");
          localStorage.removeItem("usuario");
          location.reload();
        } catch (e) {
          console.error("Error guardando votos: ", e);
          alert("Hubo un error al guardar tus votos.");
        } finally {
          enviarBtn.disabled = false;
        }
      });
    }
    
  // =========================
// NOMINACIONES CON BOTÓN ÚNICO
// =========================
const nominacionesPorCategoria = {};

// Función para crear cada apartado de nominaciones
function crearApartadoNominaciones(idLista, categoriaNombre) {
  const contenedor = document.getElementById(idLista);
  const participantes = document.querySelectorAll('#participantes .participante');
  nominacionesPorCategoria[categoriaNombre] = [];

  participantes.forEach(part => {
    const nombre = part.querySelector('h3').innerText.trim();
    const foto = part.querySelector('img').src;
    const div = document.createElement('div');
    div.classList.add('nominado');
    div.dataset.nombre = nombre;
    div.innerHTML = `<img src="${foto}" alt="${nombre}"><span>${nombre}</span>`;
    contenedor.appendChild(div);
  });

  const maxSeleccion = 3;
  contenedor.querySelectorAll('.nominado').forEach(item => {
    item.addEventListener('click', () => {
      const nombre = item.dataset.nombre;
      if (item.classList.contains('selected')) {
        item.classList.remove('selected');
        nominacionesPorCategoria[categoriaNombre] =
          nominacionesPorCategoria[categoriaNombre].filter(n => n !== nombre);
      } else {
        if (nominacionesPorCategoria[categoriaNombre].length >= maxSeleccion) {
          alert(`Solo puedes seleccionar ${maxSeleccion} nominados en esta categoría.`);
          return;
        }
        item.classList.add('selected');
        nominacionesPorCategoria[categoriaNombre].push(nombre);
      }
    });
  });
}

// Comprobar si ya ha votado (bloqueo básico en navegador)
if (localStorage.getItem('nominacionesEnviadas') === 'true') {
  document.getElementById('enviarTodasNominaciones').disabled = true;
  document.getElementById('enviarTodasNominaciones').innerText = "Ya has enviado tus nominaciones";
}

document.getElementById('enviarTodasNominaciones').addEventListener('click', async () => {

  // Si ya ha votado, no permitir
  if (localStorage.getItem('nominacionesEnviadas') === 'true') {
    alert("Ya has enviado tus nominaciones. No puedes votar de nuevo.");
    return;
  }

  // Pedir nombre
  const nombreVotante = prompt("Introduce tu nombre para registrar el voto:");
  if (!nombreVotante || nombreVotante.trim() === "") {
    alert("Debes introducir tu nombre para enviar las nominaciones.");
    return;
  }

  // Comprobar que en todas las categorías hay al menos un nominado
  for (const categoria in nominacionesPorCategoria) {
    if (nominacionesPorCategoria[categoria].length === 0) {
      alert(`Debes seleccionar al menos un nominado en la categoría: ${categoria}`);
      return;
    }
  }

  try {
    // Guardar en base de datos
    for (const categoria in nominacionesPorCategoria) {
      await addDoc(collection(db, "nominaciones"), {
        usuario: nombreVotante.trim(),
        categoria: categoria,
        nominados: nominacionesPorCategoria[categoria],
        fecha: serverTimestamp()
      });
    }

    // Marcar como enviado para bloquear futuros votos
    localStorage.setItem('nominacionesEnviadas', 'true');
    document.getElementById('enviarTodasNominaciones').disabled = true;
    document.getElementById('enviarTodasNominaciones').innerText = "Ya has enviado tus nominaciones";

    alert("¡Todas tus nominaciones han sido registradas!");
    document.querySelectorAll('.nominado').forEach(n => n.classList.remove('selected'));
    for (const categoria in nominacionesPorCategoria) {
      nominacionesPorCategoria[categoria] = [];
    }

  } catch (e) {
    console.error("Error guardando nominaciones: ", e);
    alert("Hubo un error al guardar tus nominaciones.");
  }
});

    // =========================
    // RESULTADOS CON LOGIN ADMIN
    // =========================
    const ADMIN_USER = "admin";
    const ADMIN_PASS = "1234";
    
    document.getElementById('loginBtn').addEventListener('click', () => {
      const user = document.getElementById('adminUser').value.trim();
      const pass = document.getElementById('adminPass').value.trim();
    
      if (user === ADMIN_USER && pass === ADMIN_PASS) {
        document.getElementById('login-admin').style.display = 'none';
        document.getElementById('resultados-contenido').style.display = 'block';
        cargarResultados();
      } else {
        document.getElementById('loginError').style.display = 'block';
      }
    });
    async function cargarResultados() {
  const contenedor = document.getElementById('tabla-resultados');
  contenedor.innerHTML = "<p>Cargando resultados...</p>";

  try {
    const q = query(collection(db, "nominaciones"));
    const snapshot = await getDocs(q);

    const conteo = {};
    const votantes = new Set(); // para guardar nombres únicos

    snapshot.forEach(doc => {
      const data = doc.data();
      const categoria = data.categoria || "Sin categoría";

      // Guardar el nombre del votante
      if (data.usuario) {
        votantes.add(data.usuario);
      }

      // Contar votos por categoría
      if (!conteo[categoria]) conteo[categoria] = {};
      data.nominados.forEach(nombre => {
        if (!conteo[categoria][nombre]) conteo[categoria][nombre] = 0;
        conteo[categoria][nombre]++;
      });
    });

    // Limpiar contenedor
    contenedor.innerHTML = "";

    // Mostrar lista de votantes arriba del todo
    if (votantes.size > 0) {
      const bloqueVotantes = document.createElement('div');
      bloqueVotantes.innerHTML = `
        <h4>Personas que han votado:</h4>
        <p>${Array.from(votantes).join(', ')}</p>
      `;
      contenedor.appendChild(bloqueVotantes);
    }

    // Mostrar resultados por categoría
    for (const categoria in conteo) {
      const bloque = document.createElement('div');
      bloque.innerHTML = `<h4>${categoria}</h4>`;
      const lista = document.createElement('ul');
      Object.entries(conteo[categoria])
        .sort((a, b) => b[1] - a[1])
        .forEach(([nombre, votos]) => {
          const li = document.createElement('li');
          li.textContent = `${nombre}: ${votos} votos`;
          lista.appendChild(li);
        });
      bloque.appendChild(lista);
      contenedor.appendChild(bloque);
    }

  } catch (e) {
    console.error("Error cargando resultados:", e);
    contenedor.innerHTML = "<p>Error al cargar resultados.</p>";
  }
}



    // Opcional: arrancar en Inicio
    mostrarSeccion('inicio');

    import { deleteDoc, doc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

// Función genérica para borrar todos los documentos de una colección
async function borrarColeccion(nombreColeccion) {
  try {
    const q = query(collection(db, nombreColeccion));
    const snapshot = await getDocs(q);
    const total = snapshot.size;
    if (total === 0) {
      alert(`No hay documentos en la colección "${nombreColeccion}".`);
      return;
    }
    if (!confirm(`¿Seguro que quieres borrar ${total} documentos de "${nombreColeccion}"?`)) return;

    for (const documento of snapshot.docs) {
      await deleteDoc(doc(db, nombreColeccion, documento.id));
    }
    alert(`Se han borrado ${total} documentos de "${nombreColeccion}".`);
    cargarResultados(); // refrescar resultados
  } catch (e) {
    console.error(`Error borrando ${nombreColeccion}:`, e);
    alert(`Error al borrar documentos de "${nombreColeccion}".`);
  }
}

// Eventos de los botones (solo se ejecutan tras login admin)
document.getElementById('borrarVotos').addEventListener('click', () => {
  borrarColeccion("votos");
});

document.getElementById('borrarNominaciones').addEventListener('click', () => {
  borrarColeccion("nominaciones");
});

// Botón para restaurar votaciones
document.getElementById('restaurarVotaciones').addEventListener('click', () => {
  if (confirm("¿Seguro que quieres permitir que todos puedan volver a votar?")) {
    // Elimina la marca de bloqueo en este navegador
    localStorage.removeItem('nominacionesEnviadas');
    localStorage.removeItem('votoEnviado'); // por si usas otra clave para votos

    alert("Se ha restaurado la posibilidad de votar en este navegador. Si quieres que todos puedan votar de nuevo, recuerda que este botón solo afecta al bloqueo local; para un desbloqueo global tendrías que borrar los registros en la base de datos.");
  }
});


// Modal de categorías
const modalCategoria = document.getElementById("modalCategoria");
const modalImgCat = document.getElementById("modalImagenCategoria");
const modalDescCat = document.getElementById("modalDescripcionCategoria");
const cerrarCat = modalCategoria.querySelector(".cerrar");

// Abrir modal al hacer clic en una categoría
document.querySelectorAll(".categoria").forEach(cat => {
  cat.addEventListener("click", () => {
    modalImgCat.src = cat.querySelector("img").src;
    modalDescCat.textContent = cat.dataset.descripcion;
    modalCategoria.style.display = "block";
  });
});

// Cerrar modal
cerrarCat.addEventListener("click", () => {
  modalCategoria.style.display = "none";
});
window.addEventListener("click", (e) => {
  if (e.target === modalCategoria) {
    modalCategoria.style.display = "none";
  }
});


  </script>

</script> 
<script>
    const descripciones = {
      "Asieras": "ASIER, más conocido como chichotas,Cedido de balnomano alarcos Ciudad Real e Hijo de Peter el batallas. es el dueño del famoso campo San Bartolomé, le gusta mucho drogarse y emborracharse, por lo menos no fuma porros ",
      "Rulillas": "RULAS es el mayor amante de las tortillas y los nuggets, tiene a chicote a su servicio para hacerle cualquier tipo de macarron con tomatico, le gusta mucho que le vomiten en la silla, es un maltratador de tortugas profesional, una vez encerró a su tortuga en un cubo de basura durante 21 años, es un mitico personaje de este grupo de subnormales que tiene una de las frases mas miticas de Operacion Triunfo POSSSS AVEEERRRRR",
      "Darawayas": "DARIO es el fan número uno de la pam veraniega, junto con el pequeño kastorcin tienen un negocio llamado socios.basura, el supuesto camara del grupo que el año pasado nos deleitó con miticas escenas pornograficas de la gala, es un amante del fortnite y un guarro que se tira a todas las peruanas que pilla ",
      "Ivanpechotes": "IVANPE es conocido como el rehén de Jugui Qui Jugui, si juegas con el al futbol ten en cuenta que tienes que correr mas que un puto Velocirraptor en plena era del Jurasico porque la gacela Thomphson no va a dejar a nadie escapar, baila como un abuelo senil de 347 años y aun no sabemos quien es su amor verdadero si la francesa esa o Lamine Yamal ",
      "DaniGG": " DANI es un militar casposo siempre en el calabozo, no sale nunca de madrid por ver a su querida esposa es mas guarro que un satisfyer de segunda mano, y hablando de manos a saber cuantas le habran metido por el culo... Creemos que seria capaz de vender a toda su familia y amigos por un saludo del Rey Felipe",
      "Lusilu": "LUCÍA tambien apodada como Lusilu o como la famosa novia de Sergio Ramos, aunque Alvaro de Luna tampoco se queda atras, estudia ADE(Asociacion De Esquizofrenicos) no le pega nada, como diria su esposo con mas de 3000 años las mujeres a la cocina!",
      "Almansa": "INES La de los caminos, se dedica a ir poniendo grano a grano e ir haciendo caminos en ciudad real, ahora mismo esta yendo a Lituania en uno de sus caminos magicos, siempre pone su casa para hacer las reuniones auque el pobre Martín la vaya a denunciar ella nunca nos denegaraá la entrada, no sabemos que vamos a hacer los sabados resacosos Almansunsin",
      "Robertuki": "ROBER el tio mas pesado que vas a ver en la historia, en vez de darte la mano al verte como haría una persona normal coje y te mete una hostia, pero y este tio?, aun no sabemos si viene del sur de España o de la profunda Antartida lo que si sabemos es que es el fundador de obesos sin fronteras, aunque sea Don Rosalio Parrales y trabaje mas que un negro en el Hospital de la estación de León, lo odiamos mucho.",
      "Toñaco": "MARCO el famoso jugador cedido del Caserio que al final se fue al Alarcos y un negro que acababa de salir de la selva tropical lo echo sin ningún tipo de remordimiento, por eso volvio a su equipo Caserio Colesterol, hizo la aparicion estelar en la famosa fiesta como DjPoyocu pero hizo bomba de humo, aun lo estan buscando en todo el norte de Ciudad Real, cuenta la leyenda que el tequifresi lo mató",
      "Manolo": "MANU es conocido por no bajar nunca, prácticamente no queda con el grupo y casi nunca aparece, lo que ya se ha convertido en parte de su leyenda entre los amigos.",
      "Kastor": "MARIO es un apasionado del fútbol y del Real Madrid, siempre al día con los partidos y noticias. Es muy estudioso y, entre amigos, se comenta que tiene un parecido curioso a un castor.",
      "Maria": "MARÍA se fue de Erasmus a Francia, viviendo nuevas experiencias y culturas. Estudia Letras y es la orgullosa novia de la famosa Jugui Qui Jugui, lo que la hace aún más conocida y querida en el grupo.",
      "Gamepro": "GAMEPRO tiene una debilidad por Albacete, su ciudad favorita, que visita siempre que puede. Trabaja en Popeyes y, además, es el orgulloso novio de Iceman, lo que lo hace todavía más querido en el grupo.",
      "El Enano": "FERVICO es el enano del grupo, apodo que lleva con humor y que ya es parte de su identidad entre amigos. Todos recuerdan que solo ha tocado a una mujer en su vida (¡y vaya tetas!), detalle que se comenta con frecuencia. Aun así, sigue siendo virgen, lo que suma a las bromas y anécdotas que lo rodean.",
      "Poru": "PORU es un chico al que le encantan las cafeteras, aunque siempre se nos olvida y por eso le decimos “Forgotten”. Es de los que tienen su propio apodo ya ganado en el grupo. Además, no hay duda de que su cantante favorito es Trueno, lo menciona cada vez que puede.",
      "Ikardo": "IKER es apodado el chino del grupo, siempre con ganas de zorrear y pasar un buen rato. Su sello personal son los pantalones de Bob Esponja, que lleva puestos prácticamente siempre.",
      "Fermoriv": "FERMORIV es un amante del lanzamiento de quesos, una de esas pasiones raras que ya todos en el grupo reconocen. Siempre aparece de fiesta en fiesta y, sin duda, se convierte en el alma del grupo con su energía y buen humor.",
      "Lab el Viejo": "LABRADA es el viejo del grupo siempre buscando lo más económicamente rentable en cualquier tema de finanzas. Además, no tiene filtro y es más guarro que un cerdo, lo que lo hace memorable y único entre todos.."
    };
    
    const modal = document.getElementById("modalParticipante");
const modalImg = document.getElementById("modalImagen");
const modalDescripcion = document.getElementById("modalDescripcion");
const spanCerrar = document.querySelector(".cerrar");

document.querySelectorAll(".participante").forEach(part => {
  part.addEventListener("click", () => {
    const img = part.querySelector("img");
    const nombre = part.querySelector("h3").innerText.trim();
    modalImg.src = img.src;
    modalDescripcion.innerText = descripciones[nombre] || "Sin descripción disponible.";
    modal.style.display = "block";
  });
});

spanCerrar.onclick = () => modal.style.display = "none";
window.onclick = e => { if (e.target == modal) modal.style.display = "none"; }
</script>
    