<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PREMIOS J&P 2025</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>


  <!-- NAV -->
  <nav class="top">
    <div class="nav-inner">
      <div class="logo">Josemari Awards 2025</div>
      <div class="nav-actions">
        <button class="btn" onclick="mostrarSeccion('inicio')">Inicio</button>
        <button class="btn" onclick="mostrarSeccion('participantes')">Participantes</button>
        <button class="btn" onclick="mostrarSeccion('categorias')">Categor√≠as</button>
        <button class="btn" onclick="mostrarSeccion('votacion')">Votar</button>
        <button class="btn" onclick="mostrarSeccion('votacion-nominados')">Votaci√≥n nominados</button>
        <button class="btn" onclick="mostrarSeccion('resultados')">Resultados</button>
      </div>
    </div>
  </nav>

<!-- INICIO -->
<header class="hero seccion" id="inicio">
  <div class="shine"></div>

  <!-- Columna izquierda -->
  <div class="fotos-lateral izquierda">
    <img src="fotos/Lagunas.png" alt="">
    <img src="fotos/Lodres.jpeg" alt="">
    <img src="fotos/Zurra.jpeg" alt="">
  </div>

  <div class="hero-inner">
    <div class="hero-texto">
      <span class="badge">JOSEMARI 2025</span>
      <h1>Bienvenido a los Premios Josemari 2025</h1>
      <p class="subtitle">Esta es la web oficial de los Premios de este a√±o ¬°Haz que tu voto cuente!</p>
      <div class="cta">
        <button class="btn gold" onclick="mostrarSeccion('votacion')">Votar ahora</button>
        <button class="btn" onclick="mostrarSeccion('participantes')">Ver participantes</button>
      </div>
    </div>

    <div class="hero-imagen">
      <img src="fotos/ImagenJosemari.png" alt="Imagen de inicio">
    </div>
  </div>

  <!-- Columna derecha -->
  <div class="fotos-lateral derecha">
    <img src="fotos/fin_a√±o.jpeg" alt="">
    <img src="fotos/Playa.jpeg" alt="">
    <img src="fotos/Carnaval.jpeg" alt="">
  </div>
</header>


  

  <main>
    <!-- PARTICIPANTES -->
    <section id="participantes" class="seccion">
      <h2>Participantes</h2>
      <div class="grid-participantes">
        <div class="participante"><img src="fotos/asieras.jpeg" alt="Asieras"><h3>Asieras</h3></div>
        <div class="participante"><img src="fotos/rulillas.jpeg" alt="Rulillas"><h3>Rulillas</h3></div>
        <div class="participante"><img src="fotos/dario.jpeg" alt="Darawayas"><h3>Darawayas</h3></div>
        <div class="participante"><img src="fotos/ivanp.jpeg" alt="Ivanpechotes"><h3>Ivanpechotes</h3></div>
        <div class="participante"><img src="fotos/dani.jpeg" alt="Danigg"><h3>DaniGG</h3></div>
        <div class="participante"><img src="fotos/Lucia.jpeg" alt="Lusilu"><h3>Lusilu</h3></div>
        <div class="participante"><img src="fotos/ines.jpeg" alt="Almansa"><h3>Almansa</h3></div>
        <div class="participante"><img src="fotos/rober.jpeg" alt="Robertuki"><h3>Robertuki</h3></div>
        <div class="participante"><img src="fotos/marco.jpeg" alt="To√±aco"><h3>To√±aco</h3></div>
        <div class="participante"><img src="fotos/manu.jpeg" alt="Manolo"><h3>Manolo</h3></div>
        <div class="participante"><img src="fotos/mario.jpeg" alt="Kastor"><h3>Kastor</h3></div>
        <div class="participante"><img src="fotos/maria.jpeg" alt="Maria"><h3>Maria</h3></div>
        <div class="participante"><img src="fotos/gamepro.jpeg" alt="Gamepro"><h3>Gamepro</h3></div>
        <div class="participante"><img src="fotos/fervico.jpeg" alt="El Enano"><h3>El Enano</h3></div>
        <div class="participante"><img src="fotos/Poru.jpeg" alt="Poru"><h3>Poru</h3></div>
        <div class="participante"><img src="fotos/iker.jpeg" alt="Ikardo"><h3>Ikardo</h3></div>
        <div class="participante"><img src="fotos/Fermoriv.jpeg" alt="Fermoriv"><h3>Fermoriv</h3></div>
        <div class="participante"><img src="fotos/labrada.jpeg" alt="Lab el Viejo"><h3>Lab el Viejo</h3></div>
<!-- Modal para mostrar participante -->
</div>
</section>
<script>
  function mostrarSeccion(seccion) {
    document.querySelectorAll('.seccion').forEach(sec => sec.style.display = 'none');
    document.getElementById(seccion).style.display = 'block';
    window.scrollTo({ top: 0, behavior: 'smooth' });
  
    if (seccion === 'votacion-nominados') {
      // Limpiar antes de rellenar para evitar duplicados
      document.getElementById('lista-nominados-1').innerHTML = '';
      document.getElementById('lista-nominados-2').innerHTML = '';
  
      crearApartadoNominaciones('lista-nominados-1', 'enviarNominados1', 'nominaciones_soltero');
      crearApartadoNominaciones('lista-nominados-2', 'enviarNominados2', 'nominaciones_otro');
    }
  }
    </script>
  
  

<!-- Modal fuera de la secci√≥n -->
<!-- Modal fuera de la secci√≥n -->
<div id="modalParticipante" class="modal">
    <div class="modal-contenido">
      <span class="cerrar">&times;</span>
      <div class="modal-body">
        <img id="modalImagen" src="" alt="">
        <div class="modal-texto">
          <p id="modalDescripcion"></p>
        </div>
      </div>
    </div>
  </div>
  


<!-- CATEGOR√çAS -->
<section id="categorias" class="seccion">
  <h2>Categor√≠as</h2>
  <div class="grid-participantes">
    <div class="categoria" data-descripcion="Boracho del A√±o: La persona que mas se ha puesto hasta el culo en todo el a√±o, nose si tanto como en la foto porque vaya cogorza lleva mi colegon el reparte melones, asi da gusto, esta categoria es para los valientes y para los que le echan cojones ostia">
      <img src="fotos/borracho.png" alt="Borracho del a√±o">
      <h3> Borracho del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Fiestero del A√±o: ¬°Siempre listo para la fiesta! Donde hay m√∫sica y diversi√≥n, ah√≠ est√° √©l/ella, contagiando alegr√≠a y buena vibra a todos">
      <img src="fotos/fiestero.png" alt="Fiestero del a√±o">
      <h3> Fiestero del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Video del A√±o: Ese clip que todos vimos mil veces, que nos hizo re√≠r, sorprendernos o simplemente recordar un momento √©pico. ¬°Imposible olvidarlo!">
      <img src="fotos/viajero.jpg" alt="Viejero del a√±o">
      <h3> Viejero del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Palabras del A√±o: La palabra perfecta, el comentario m√°s √©pico o el dicho que todos recuerdan. ¬°Lo que hace historia!">
      <img src="fotos/" alt="Palabra del a√±o">
      <h3> Palabra/Frase del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Tr√≠o del A√±o: Ese grupo inseparable que siempre est√° junto, causando risas, travesuras y momentos inolvidables. ¬°Tres veces m√°s diversi√≥n!">
      <img src="fotos/trio.jpg" alt="trio del a√±o">
      <h3> Trio del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Mejor Personaje fuera de JYP: Esa persona fuera del grupo que brilla por su estilo √∫nico y carisma, dejando huella all√° donde va. ¬°Imposible no recordarla">
      <img src="fotos/mpersonaje.jpg" alt="Mejor Personaje fuera de JyP">
      <h3> Mejor Personaje fuera de JyP</h3>
    </div>
    <div class="categoria" data-descripcion="Fiesta del A√±o: La celebraci√≥n que nadie quiere perderse: m√∫sica, risas y momentos √©picos garantizados. ¬°Memorable de principio a fin!">
      <img src="fotos/fiesta.jpg" alt="Fiesta del a√±o">
      <h3> Fiesta del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Autistada del A√±o: Esa persona que destaca por su intensidad, originalidad y pasi√≥n en hacer la mayor autistada del a√±o. ¬°Siempre dejando su marca √∫nica!">
      <img src="fotos/autistada.png" alt="Autistada del a√±o">
      <h3> Autistada del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Broma del A√±o: Ese momento que nos hizo re√≠r hasta doler la panza y que todos recordaremos por siempre. ¬°Risas garantizadas!">
      <img src="fotos/broma.png" alt="Broma del a√±o">
      <h3> Broma del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Foto del A√±o: La captura que lo dice todo: momentos √©picos, caras inolvidables y pura vibra. ¬°Inmortalizada para la historia!">
      <img src="fotos/foto.png" alt="Foto del a√±o">
      <h3> Foto del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Video del A√±o: Ese clip que todos vimos mil veces, que nos hizo re√≠r, sorprendernos o simplemente recordar un momento √©pico. ¬°Imposible olvidarlo!">
      <img src="fotos/video.jpg" alt="Video del a√±o">
      <h3> Video del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Mote del A√±o: Ese apodo que se qued√≥ pegado, nos hizo re√≠r y define a la perfecci√≥n a su due√±o. ¬°Imposible no llamarlo as√≠!">
      <img src="fotos/mote.png" alt="Mote del a√±o">
      <h3> Mote del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="M√°s Guarro: Esa persona que no tiene filtros, dice lo que piensa y vive la vida sin verg√ºenza. ¬°Sin miedo y sin censura!">
      <img src="fotos/guarrete.png" alt="Guarrete del a√±o">
      <h3> Guarrete del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Fail del A√±o: Ese momento √©pico que sali√≥ todo mal‚Ä¶ pero nos hizo re√≠r a carcajadas. ¬°Un cl√°sico que nunca olvidaremos!">
      <img src="fotos/fail.jpg" alt="Fail del a√±o">
      <h3> Fail del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Mejor Momento del A√±o: Ese instante que nos hizo sonre√≠r, celebrar o simplemente sentir que todo vali√≥ la pena. ¬°Pura magia!">
      <img src="fotos/m.png" alt="Mejor Momento del a√±o">
      <h3> Mejor momento del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Meme del A√±o: Ese momento convertido en imagen que nos hizo re√≠r una y otra vez. ¬°Imposible olvidarlo!">
      <img src="fotos/meme.jpg" alt="Meme del a√±o">
      <h3> Meme del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Braihot del A√±o: Esa persona que siempre sorprende con ideas locas, ocurrencias √©picas y creatividad sin l√≠mites. ¬°Pura genialidad rebelde!">
      <img src="fotos/braihot.jpg" alt="Braihot del a√±o">
      <h3> Braihot del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Correa del A√±o: La persona que siempre quiere hacer de todo‚Ä¶ pero su pareja no la deja ni respirar">
      <img src="fotos/correon.png" alt="Correon del a√±o">
      <h3> Correon del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Objeto del A√±o: Ese accesorio o cosa que se volvi√≥ protagonista, usado, recordado o mencionado por todos. ¬°El verdadero √≠cono del grupo!">
      <img src="fotos/objeto.jpg" alt="Objeto del a√±o">
      <h3> Objeto del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Loco del A√±o: Esa persona que siempre rompe esquemas con ocurrencias inesperadas, locuras √©picas y energ√≠a sin fin. ¬°Nunca sabes qu√© esperar!">
      <img src="fotos/loco.jpg" alt="Loco del a√±o">
      <h3> Loco del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Mejor Vestido del A√±o: Siempre con estilo impecable, marcando tendencia y rob√°ndose miradas. ¬°El icono fashion del grupo!">
      <img src="fotos/mejorviste.png" alt="El que mejor viste del a√±o">
      <h3> El que mejor viste del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Peor Momento del A√±o: Ese instante que todos quisimos borrar, pero que termin√≥ siendo parte de la historia.">
      <img src="fotos/peor_m.png" alt="Peor momento del a√±o">
      <h3> Peor momento del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Papi/Mami del A√±o: La persona que se preocupa por todos, cuida, aconseja y siempre est√° al pendiente del grupo. ¬°Nuestro √°ngel guardi√°n">
      <img src="fotos/papi.jpg" alt="Papi/Mami del a√±o">
      <h3> Papi/Mami del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Competitivo del A√±o: Siempre buscando ganar en todo, desde juegos hasta bromas. ¬°No conoce la palabra rendirse!">
      <img src="fotos/competitivo.png" alt="Competitivo del a√±o">
      <h3> Competitivo del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Mensaje del A√±o: Ese chat que se volvi√≥ legendario, ya sea por hacerlo re√≠r, sorprender o quedar grabado en la memoria del grupo.">
      <img src="fotos/fiestero.png" alt="Mensaje del a√±o">
      <h3> Mensaje del a√±o</h3>
    </div>
    <div class="categoria" data-descripcion="Premio a la persona m√°s divertida.">
      <img src="fotos/fiestero.png" alt="FIestero del a√±o">
      <h3> FIestero del a√±o</h3>
    </div>    <div class="categoria" data-descripcion="Premio a la persona m√°s divertida.">
      <img src="fotos/fiestero.png" alt="FIestero del a√±o">
      <h3> FIestero del a√±o</h3>
    </div>    <div class="categoria" data-descripcion="Decepci√≥n del A√±o: Esa persona que nos fall√≥ o nos sorprendi√≥ para mal, dej√°ndonos con cara de ‚Äúno me lo esperaba‚Äù.">
      <img src="fotos/decepcion.jpg" alt="Decepci√≥n del a√±o">
      <h3> Decepci√≥n del a√±o</h3>
    </div>    <div class="categoria" data-descripcion="Revelaci√≥n del A√±o: Esa persona que sorprendi√≥ a todos con su talento, carisma o estilo. ¬°Nadie la vio venir y ahora todos hablan de ella!">
      <img src="fotos/revelacion.png" alt="Revelaci√≥n del a√±o">
      <h3> Revelaci√≥n del a√±o</h3>
    </div>    <div class="categoria" data-descripcion="MVP: La persona que se lleva todos los aplausos, siempre destacando y dejando huella. ¬°Imparable y digno de ovaci√≥n!">
      <img src="fotos/mvp.png" alt="MVP del a√±o">
      <h3> MVP del a√±o</h3>
    </div>
  </div>
</section>

<!-- Modal para mostrar categor√≠a -->
<div id="modalCategoria" class="modal">
  <div class="modal-contenido">
    <span class="cerrar">&times;</span>
    <div class="modal-body">
      <img id="modalImagenCategoria" src="" alt="">
      <div class="modal-texto">
        <p id="modalDescripcionCategoria"></p>
      </div>
    </div>
  </div>
</div>


    <!-- VOTACI√ìN -->
    <section id="votacion" class="seccion" style="display:none;">
      <div style="padding:50px; text-align:center; font-size:1.5em; font-weight:bold;">
        üöß Esta parte a√∫n no est√° disponible.  
        <br>¬°Pronto podr√°s votar aqu√≠!
      </div>
    </section>
    
    <section id="votacion" class="seccion">
      <h2>Votaci√≥n</h2>
      <p>Selecciona tus nominados y pulsa ‚ÄúVOTAR‚Äù.</p>

      <div class="categoria">
        <h3>Mejor amigo</h3>
        <button class="voto" data-categoria="Mejor amigo" data-nominado="Asieras">Asieras</button>
        <button class="voto" data-categoria="Mejor amigo" data-nominado="Rulillas">Rulillas</button>
        <button class="voto" data-categoria="Mejor amigo" data-nominado="Darawayas">Darawayas</button>
      </div>

      <div class="categoria">
        <h3>M√°s divertido</h3>
        <button class="voto" data-categoria="M√°s divertido" data-nominado="Asieras">Asieras</button>
        <button class="voto" data-categoria="M√°s divertido" data-nominado="Rulillas">Rulillas</button>
        <button class="voto" data-categoria="M√°s divertido" data-nominado="Darawayas">Darawayas</button>
      </div>

      <div class="categoria">
        <h3>M√°s creativo</h3>
        <button class="voto" data-categoria="M√°s creativo" data-nominado="Asieras">Asieras</button>
        <button class="voto" data-categoria="M√°s creativo" data-nominado="Rulillas">Rulillas</button>
        <button class="voto" data-categoria="M√°s creativo" data-nominado="Darawayas">Darawayas</button>
      </div>

      <button id="enviarVoto" class="btn gold">VOTAR</button>
    </section>

    <section id="votacion-nominados" class="seccion" style="display:none;">
      <h2>Fiestero/a del a√±o</h2>
      <p>Selecciona hasta <strong>3</strong> candidatos.</p>
      <div id="lista-nominados-1" class="grid-nominados"></div>
    
      <h2>Borrach@ del a√±o</h2>
      <p>Selecciona hasta <strong>3</strong> candidatos.</p>
      <div id="lista-nominados-2" class="grid-nominados"></div>
    
      <h2>M√°s guarr@ del a√±o</h2>
      <p>Selecciona hasta <strong>3</strong> candidatos.</p>
      <div id="lista-nominados-3" class="grid-nominados"></div>
    
      <h2>Viajero/a</h2>
      <p>Selecciona hasta <strong>3</strong> candidatos.</p>
      <div id="lista-nominados-4" class="grid-nominados"></div>
    
      <h2>Otra categor√≠a</h2>
      <p>Selecciona hasta <strong>3</strong> candidatos.</p>
      <div id="lista-nominados-5" class="grid-nominados"></div>
    
      <!-- Bot√≥n √∫nico -->
      <button id="enviarTodasNominaciones" class="btn gold">Enviar todas las nominaciones</button>
    </section>
    
    <section id="resultados" class="seccion" style="display:none;">
      <h2>Resultados de las votaciones</h2>
    
      <div id="login-admin">
        <p>Introduce usuario y contrase√±a para ver los resultados:</p>
        <input type="text" id="adminUser" placeholder="Usuario">
        <input type="password" id="adminPass" placeholder="Contrase√±a">
        <button id="loginBtn" class="btn gold">Acceder</button>
        <p id="loginError" style="color:red; display:none;">Usuario o contrase√±a incorrectos</p>
      </div>
    
      <div id="resultados-contenido" style="display:none;">
        <h3>Resultados por categor√≠a</h3>
        <div id="tabla-resultados"></div>
    
        <!-- Botones de borrado SOLO visibles aqu√≠ -->
        <button id="borrarVotos" class="btn red" style="margin-top:15px;">Borrar todos los votos</button>
        <button id="borrarNominaciones" class="btn red" style="margin-top:15px;">Borrar todas las nominaciones</button>
    
        <!-- Nuevo bot√≥n para restaurar votaciones -->
        <button id="restaurarVotaciones" class="btn gold" style="margin-top:15px;">Restaurar votaciones</button>
      </div>
    </section>
    
    

    
  </main>

  
  <footer>
    ¬© Premios Josemari 2025 ‚Äî Hecho por Iceman.
  </footer>

    
  

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp, getDocs, query } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyBNfmxGA8GNgWf-N1sstPhQlWitYMjnd6M",
      authDomain: "premiosjosemari-bc894.firebaseapp.com",
      projectId: "premiosjosemari-bc894",
      storageBucket: "premiosjosemari-bc894.appspot.com",
      messagingSenderId: "118315358578",
      appId: "1:118315358578:web:4c6c2248fdbdd4f61e65eb"
    };
    
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    
    // --- Obtener o pedir usuario ---
    let usuarioActual = localStorage.getItem("usuario");
    if (!usuarioActual) {
      usuarioActual = prompt("Introduce tu nombre para votar:");
      if (usuarioActual && usuarioActual.trim() !== "") {
        localStorage.setItem("usuario", usuarioActual.trim());
      } else {
        alert("Debes introducir un nombre para poder votar.");
      }
    }
    
    // =========================
    // FUNCI√ìN PARA CAMBIAR DE SECCI√ìN
    // =========================
    window.mostrarSeccion = function (seccion) {
      document.querySelectorAll('.seccion').forEach(sec => sec.style.display = 'none');
      document.getElementById(seccion).style.display = 'block';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    
      if (seccion === 'votacion-nominados') {
        ['lista-nominados-1','lista-nominados-2','lista-nominados-3','lista-nominados-4','lista-nominados-5']
          .forEach(id => document.getElementById(id).innerHTML = '');
    
        crearApartadoNominaciones('lista-nominados-1', 'Fiester@ del a√±o');
        crearApartadoNominaciones('lista-nominados-2', 'Borrach@ del a√±o');
        crearApartadoNominaciones('lista-nominados-3', 'M√°s guarr@ del a√±o');
        crearApartadoNominaciones('lista-nominados-4', 'Viajero/a');
        crearApartadoNominaciones('lista-nominados-5', 'Otra categor√≠a');
      }
    };
    
    // =========================
    // VOTACI√ìN NORMAL
    // =========================
    const votosSeleccionados = {};
    document.querySelectorAll('.voto').forEach(btn => {
      btn.addEventListener('click', () => {
        const categoria = btn.dataset.categoria;
        const nominado = btn.dataset.nominado;
        votosSeleccionados[categoria] = nominado;
    
        document.querySelectorAll(`.voto[data-categoria="${categoria}"]`)
          .forEach(b => b.classList.remove('selected'));
    
        btn.classList.add('selected');
      });
    });
    
    const enviarBtn = document.getElementById('enviarVoto');
    if (enviarBtn) {
      enviarBtn.addEventListener('click', async () => {
        const categorias = ["Mejor amigo", "M√°s divertido", "M√°s creativo"];
        for (let cat of categorias) {
          if (!votosSeleccionados[cat]) {
            alert(`Debes seleccionar un participante para "${cat}"`);
            return;
          }
        }
        try {
          enviarBtn.disabled = true;
          for (let cat of categorias) {
            await addDoc(collection(db, "votos"), {
              usuario: usuarioActual,
              categoria: cat,
              nominado: votosSeleccionados[cat],
              fecha: serverTimestamp()
            });
          }
          alert("¬°Tus votos han sido registrados!");
          localStorage.removeItem("usuario");
          location.reload();
        } catch (e) {
          console.error("Error guardando votos: ", e);
          alert("Hubo un error al guardar tus votos.");
        } finally {
          enviarBtn.disabled = false;
        }
      });
    }
    
  // =========================
// NOMINACIONES CON BOT√ìN √öNICO
// =========================
const nominacionesPorCategoria = {};

// Funci√≥n para crear cada apartado de nominaciones
function crearApartadoNominaciones(idLista, categoriaNombre) {
  const contenedor = document.getElementById(idLista);
  const participantes = document.querySelectorAll('#participantes .participante');
  nominacionesPorCategoria[categoriaNombre] = [];

  participantes.forEach(part => {
    const nombre = part.querySelector('h3').innerText.trim();
    const foto = part.querySelector('img').src;
    const div = document.createElement('div');
    div.classList.add('nominado');
    div.dataset.nombre = nombre;
    div.innerHTML = `<img src="${foto}" alt="${nombre}"><span>${nombre}</span>`;
    contenedor.appendChild(div);
  });

  const maxSeleccion = 3;
  contenedor.querySelectorAll('.nominado').forEach(item => {
    item.addEventListener('click', () => {
      const nombre = item.dataset.nombre;
      if (item.classList.contains('selected')) {
        item.classList.remove('selected');
        nominacionesPorCategoria[categoriaNombre] =
          nominacionesPorCategoria[categoriaNombre].filter(n => n !== nombre);
      } else {
        if (nominacionesPorCategoria[categoriaNombre].length >= maxSeleccion) {
          alert(`Solo puedes seleccionar ${maxSeleccion} nominados en esta categor√≠a.`);
          return;
        }
        item.classList.add('selected');
        nominacionesPorCategoria[categoriaNombre].push(nombre);
      }
    });
  });
}

// Comprobar si ya ha votado (bloqueo b√°sico en navegador)
if (localStorage.getItem('nominacionesEnviadas') === 'true') {
  document.getElementById('enviarTodasNominaciones').disabled = true;
  document.getElementById('enviarTodasNominaciones').innerText = "Ya has enviado tus nominaciones";
}

document.getElementById('enviarTodasNominaciones').addEventListener('click', async () => {

  // Si ya ha votado, no permitir
  if (localStorage.getItem('nominacionesEnviadas') === 'true') {
    alert("Ya has enviado tus nominaciones. No puedes votar de nuevo.");
    return;
  }

  // Pedir nombre
  const nombreVotante = prompt("Introduce tu nombre para registrar el voto:");
  if (!nombreVotante || nombreVotante.trim() === "") {
    alert("Debes introducir tu nombre para enviar las nominaciones.");
    return;
  }

  // Comprobar que en todas las categor√≠as hay al menos un nominado
  for (const categoria in nominacionesPorCategoria) {
    if (nominacionesPorCategoria[categoria].length === 0) {
      alert(`Debes seleccionar al menos un nominado en la categor√≠a: ${categoria}`);
      return;
    }
  }

  try {
    // Guardar en base de datos
    for (const categoria in nominacionesPorCategoria) {
      await addDoc(collection(db, "nominaciones"), {
        usuario: nombreVotante.trim(),
        categoria: categoria,
        nominados: nominacionesPorCategoria[categoria],
        fecha: serverTimestamp()
      });
    }

    // Marcar como enviado para bloquear futuros votos
    localStorage.setItem('nominacionesEnviadas', 'true');
    document.getElementById('enviarTodasNominaciones').disabled = true;
    document.getElementById('enviarTodasNominaciones').innerText = "Ya has enviado tus nominaciones";

    alert("¬°Todas tus nominaciones han sido registradas!");
    document.querySelectorAll('.nominado').forEach(n => n.classList.remove('selected'));
    for (const categoria in nominacionesPorCategoria) {
      nominacionesPorCategoria[categoria] = [];
    }

  } catch (e) {
    console.error("Error guardando nominaciones: ", e);
    alert("Hubo un error al guardar tus nominaciones.");
  }
});

    // =========================
    // RESULTADOS CON LOGIN ADMIN
    // =========================
    const ADMIN_USER = "admin";
    const ADMIN_PASS = "1234";
    
    document.getElementById('loginBtn').addEventListener('click', () => {
      const user = document.getElementById('adminUser').value.trim();
      const pass = document.getElementById('adminPass').value.trim();
    
      if (user === ADMIN_USER && pass === ADMIN_PASS) {
        document.getElementById('login-admin').style.display = 'none';
        document.getElementById('resultados-contenido').style.display = 'block';
        cargarResultados();
      } else {
        document.getElementById('loginError').style.display = 'block';
      }
    });
    async function cargarResultados() {
  const contenedor = document.getElementById('tabla-resultados');
  contenedor.innerHTML = "<p>Cargando resultados...</p>";

  try {
    const q = query(collection(db, "nominaciones"));
    const snapshot = await getDocs(q);

    const conteo = {};
    const votantes = new Set(); // para guardar nombres √∫nicos

    snapshot.forEach(doc => {
      const data = doc.data();
      const categoria = data.categoria || "Sin categor√≠a";

      // Guardar el nombre del votante
      if (data.usuario) {
        votantes.add(data.usuario);
      }

      // Contar votos por categor√≠a
      if (!conteo[categoria]) conteo[categoria] = {};
      data.nominados.forEach(nombre => {
        if (!conteo[categoria][nombre]) conteo[categoria][nombre] = 0;
        conteo[categoria][nombre]++;
      });
    });

    // Limpiar contenedor
    contenedor.innerHTML = "";

    // Mostrar lista de votantes arriba del todo
    if (votantes.size > 0) {
      const bloqueVotantes = document.createElement('div');
      bloqueVotantes.innerHTML = `
        <h4>Personas que han votado:</h4>
        <p>${Array.from(votantes).join(', ')}</p>
      `;
      contenedor.appendChild(bloqueVotantes);
    }

    // Mostrar resultados por categor√≠a
    for (const categoria in conteo) {
      const bloque = document.createElement('div');
      bloque.innerHTML = `<h4>${categoria}</h4>`;
      const lista = document.createElement('ul');
      Object.entries(conteo[categoria])
        .sort((a, b) => b[1] - a[1])
        .forEach(([nombre, votos]) => {
          const li = document.createElement('li');
          li.textContent = `${nombre}: ${votos} votos`;
          lista.appendChild(li);
        });
      bloque.appendChild(lista);
      contenedor.appendChild(bloque);
    }

  } catch (e) {
    console.error("Error cargando resultados:", e);
    contenedor.innerHTML = "<p>Error al cargar resultados.</p>";
  }
}



    // Opcional: arrancar en Inicio
    mostrarSeccion('inicio');

    import { deleteDoc, doc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

// Funci√≥n gen√©rica para borrar todos los documentos de una colecci√≥n
async function borrarColeccion(nombreColeccion) {
  try {
    const q = query(collection(db, nombreColeccion));
    const snapshot = await getDocs(q);
    const total = snapshot.size;
    if (total === 0) {
      alert(`No hay documentos en la colecci√≥n "${nombreColeccion}".`);
      return;
    }
    if (!confirm(`¬øSeguro que quieres borrar ${total} documentos de "${nombreColeccion}"?`)) return;

    for (const documento of snapshot.docs) {
      await deleteDoc(doc(db, nombreColeccion, documento.id));
    }
    alert(`Se han borrado ${total} documentos de "${nombreColeccion}".`);
    cargarResultados(); // refrescar resultados
  } catch (e) {
    console.error(`Error borrando ${nombreColeccion}:`, e);
    alert(`Error al borrar documentos de "${nombreColeccion}".`);
  }
}

// Eventos de los botones (solo se ejecutan tras login admin)
document.getElementById('borrarVotos').addEventListener('click', () => {
  borrarColeccion("votos");
});

document.getElementById('borrarNominaciones').addEventListener('click', () => {
  borrarColeccion("nominaciones");
});

// Bot√≥n para restaurar votaciones
document.getElementById('restaurarVotaciones').addEventListener('click', () => {
  if (confirm("¬øSeguro que quieres permitir que todos puedan volver a votar?")) {
    // Elimina la marca de bloqueo en este navegador
    localStorage.removeItem('nominacionesEnviadas');
    localStorage.removeItem('votoEnviado'); // por si usas otra clave para votos

    alert("Se ha restaurado la posibilidad de votar en este navegador. Si quieres que todos puedan votar de nuevo, recuerda que este bot√≥n solo afecta al bloqueo local; para un desbloqueo global tendr√≠as que borrar los registros en la base de datos.");
  }
});


// Modal de categor√≠as
const modalCategoria = document.getElementById("modalCategoria");
const modalImgCat = document.getElementById("modalImagenCategoria");
const modalDescCat = document.getElementById("modalDescripcionCategoria");
const cerrarCat = modalCategoria.querySelector(".cerrar");

// Abrir modal al hacer clic en una categor√≠a
document.querySelectorAll(".categoria").forEach(cat => {
  cat.addEventListener("click", () => {
    modalImgCat.src = cat.querySelector("img").src;
    modalDescCat.textContent = cat.dataset.descripcion;
    modalCategoria.style.display = "block";
  });
});

// Cerrar modal
cerrarCat.addEventListener("click", () => {
  modalCategoria.style.display = "none";
});
window.addEventListener("click", (e) => {
  if (e.target === modalCategoria) {
    modalCategoria.style.display = "none";
  }
});


  </script>

</script> 
<script>
    const descripciones = {
      "Asieras": "ASIER es apodado el chichotas y es el orgulloso due√±o de nuestro campo de veraneo, un lugar que siempre re√∫ne al grupo. Adem√°s, comparte con Rulas la creatividad de ser uno de los creadores de los Premios Jose Mari, una tradici√≥n ya ic√≥nica.",
      "Rulillas": "RULAS es un amante de la tortilla de patatas y siempre est√° dispuesto a compartirla. Sus amigos lo imitan muy bien, y adem√°s es el creador de los famosos Premios Jose Mari, que ya forman parte de la tradici√≥n del grupo.",
      "Darawayas": "DARIO es el fan n√∫mero uno de la pam veraniega, algo que siempre lo caracteriza en el grupo. Es el encargado de grabar los vlogs, capturando los mejores momentos de cada salida. Adem√°s, tiene su propia tienda de camisetas de f√∫tbol, lo que lo convierte en el experto deportivo de confianza.",
      "Ivanpechotes": "IVANPE es conocido como el reh√©n de Jugui Qui Jugui, siempre a su lado en cualquier plan. Es un apasionado del Barcelona y tiene un baile especial con Mozos que nunca falta en las quedadas del grupo.",
      "DaniGG": "DANI es un militar casposo con car√°cter fuerte, siempre fiel a su estilo. Tiene novia en Madrid y, aunque ‚Äúno baja‚Äù, eso no le impide ser un aventurero que disfruta de nuevas experiencias y retos.",
      "Lusilu": "LUC√çA estudia ADE y siempre se interesa por temas de administraci√≥n y econom√≠a. Es una gran fan de Sergio Ramos y no se pierde nada de la Semana Santa, mostrando sus pasiones tanto deportivas como culturales.",
      "Almansa": "INES estudia Ingenier√≠a de Caminos y ha vivido la experiencia Erasmus con las lituanas, a quienes todos comentan que est√°n muy buenas. Adem√°s, le gusta irse temprano de las quedadas, aunque siempre deja su huella antes de marcharse.",
      "Robertuki": "ROBER es apodado el ping√ºino obeso del grupo, un mote que lleva con humor. Le encanta C√≥rdoba y siempre se le ve repartiendo palmadas en la espalda, mostrando su car√°cter amigable y cercano.",
      "To√±aco": "MARCO tiene un parecido innegable con Pocoy√≥, algo que siempre saca risas entre sus amigos. Es conocido por no gastar dinero en nada y mucho menos por pagar, detalle que ya es parte de su fama. Adem√°s, juega balonmano en el Plata, lo que completa su estilo tan particular",
      "Manolo": "MANU es conocido por no bajar nunca, pr√°cticamente no queda con el grupo y casi nunca aparece, lo que ya se ha convertido en parte de su leyenda entre los amigos.",
      "Kastor": "MARIO es un apasionado del f√∫tbol y del Real Madrid, siempre al d√≠a con los partidos y noticias. Es muy estudioso y, entre amigos, se comenta que tiene un parecido curioso a un castor.",
      "Maria": "MAR√çA se fue de Erasmus a Francia, viviendo nuevas experiencias y culturas. Estudia Letras y es la orgullosa novia de la famosa Jugui Qui Jugui, lo que la hace a√∫n m√°s conocida y querida en el grupo.",
      "Gamepro": "GAMEPRO tiene una debilidad por Albacete, su ciudad favorita, que visita siempre que puede. Trabaja en Popeyes y, adem√°s, es el orgulloso novio de Iceman, lo que lo hace todav√≠a m√°s querido en el grupo.",
      "El Enano": "FERVICO es el enano del grupo, apodo que lleva con humor y que ya es parte de su identidad entre amigos. Todos recuerdan que solo ha tocado a una mujer en su vida (¬°y vaya tetas!), detalle que se comenta con frecuencia. Aun as√≠, sigue siendo virgen, lo que suma a las bromas y an√©cdotas que lo rodean.",
      "Poru": "PORU es un chico al que le encantan las cafeteras, aunque siempre se nos olvida y por eso le decimos ‚ÄúForgotten‚Äù. Es de los que tienen su propio apodo ya ganado en el grupo. Adem√°s, no hay duda de que su cantante favorito es Trueno, lo menciona cada vez que puede.",
      "Ikardo": "IKER es apodado el chino del grupo, siempre con ganas de zorrear y pasar un buen rato. Su sello personal son los pantalones de Bob Esponja, que lleva puestos pr√°cticamente siempre.",
      "Fermoriv": "FERMORIV es un amante del lanzamiento de quesos, una de esas pasiones raras que ya todos en el grupo reconocen. Siempre aparece de fiesta en fiesta y, sin duda, se convierte en el alma del grupo con su energ√≠a y buen humor.",
      "Lab el Viejo": "LABRADA es el viejo del grupo siempre buscando lo m√°s econ√≥micamente rentable en cualquier tema de finanzas. Adem√°s, no tiene filtro y es m√°s guarro que un cerdo, lo que lo hace memorable y √∫nico entre todos.."
    };
    
    const modal = document.getElementById("modalParticipante");
const modalImg = document.getElementById("modalImagen");
const modalDescripcion = document.getElementById("modalDescripcion");
const spanCerrar = document.querySelector(".cerrar");

document.querySelectorAll(".participante").forEach(part => {
  part.addEventListener("click", () => {
    const img = part.querySelector("img");
    const nombre = part.querySelector("h3").innerText.trim();
    modalImg.src = img.src;
    modalDescripcion.innerText = descripciones[nombre] || "Sin descripci√≥n disponible.";
    modal.style.display = "block";
  });
});

spanCerrar.onclick = () => modal.style.display = "none";
window.onclick = e => { if (e.target == modal) modal.style.display = "none"; }
</script>
    
